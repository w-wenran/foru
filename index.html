<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title>foru</title>
    <link rel="stylesheet" href="./lib/css/font-awesome-4.7.0/css/font-awesome.min.css">
    <script src="./lib/jquery3.0.0/jquery.min.js"></script>

    <style>

        html,body{height:100%;padding:0;margin:0}

        html,body,.container{width:100%;height:100%}

        .container{overflow:hidden;border-radius:2px}

        body{background:#fafafa;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;color:#333;
        background-image: url("./fire/night-trees-stars.jpg");background-repeat:no-repeat; background-size:100% 100%;-moz-background-size:100% 100%;}

        .container.dark .element text{fill:yellow}

        .container.dark .color-theme{background:white}

        .container.dark .modal{color:whitesmoke}

        .container.dark .modal .hotkey{color:whitesmoke}

        .container.dark .main{background:#333}

        .container.dark .main .bg-circle{fill:yellow}

        .container.dark text{fill:yellow}



        #code {
            color:#fafafa;
            font-family:"Consolas","Monaco","Bitstream Vera Sans Mono","Courier New","sans-serif";
            font-size:12px;
            margin: 10px;
            position: absolute;
        }
        #code .string{color:#2a36ff}
        #code .keyword{color:#7f0055;font-weight:bold}
        #code .placeholder{margin-left:15px}
        #code .space{margin-left:7px}
        #code .comments{color:#629755}
        #code .page{display: none}


    </style>


</head>
<body>

    <div class="container dark">
        <div id = "template" style="display: none">
            <div id = "page1" class="page">
                <i class="fa fa-heart fa-5x"></i>Love Confession<br />
                <span class="space"/><span class="comments">Author Kidding wr.</span><br />
                <span class="space"/><span class="comments">CreateDate 2018-05-20.</span><br />
                <span class="space"/><span class="comments">Copyright Kidding wr All rights reserved ^_^</span><br />
                Boy's name <span class="keyword">WWR</span><br />
                Girl's name <span class="keyword">ZQ</span><br />
                <span class="comments">//He likes her. </span><br />
                The boy like the girl;<br />
                <span class="comments">Maybe the girl also like boy</span><br />
                Today is <span class="keyword">520</span>, a special day<br />
                <span class="comments">I donâ€™t know if you have any expectations</span><br />
                Buy a bunch of <span class="keyword">flowers</span> and mail it to you<br />
                But the flowers will fade<br />
                <span class="comments">maybe one day</span><br />
                <span class="comments">I want to give it to you myself</span><br />
                <span class="comments">Cause I want to see your face at that time</span><br />
                I want to do something that can last a long time<br />
                Give you my <span class="keyword">hand-made</span> web page<br />
                Write some words I want to say on it<br />
                In this way, it will <span class="keyword">always exist</span><br />
                <span class="comments">// Whether on foot or 1318 kilometers.</span><br />
                <span class="keyword">The boy</span> very <span class="keyword">happy</span>;<br />
                <span class="placeholder"/><span class="comments">// Whether it is right now</span><br />
                <span class="placeholder"/><span class="comments">// Still in the distant future.</span><br />
                <span class="placeholder"/>The boy has but one dream;<br />
                <span class="comments">// The boy wants the girl could well have been happy.</span><br />
                <br>
                I want to say:<br />
                The darkness is no darkness with thee;<br />
                Baby, I love you forever;<br />
            </div>
        </div>
		<canvas id="mycanvas" style="margin: 0px auto 0px;position: absolute;"></canvas>
        <div id="code">


        </div>
    </div>
<script src="./lib/d3js/d3.v5.min.js"></script>
<script src="./fire/victor.min.js" charset="utf-8"></script>
<script src="./fire/firework.min.js" charset="utf-8"></script>
<script src="./fire/firework-main.min.js" charset="utf-8"></script>
</body>
<script type="application/javascript">

    var Shooter = function () {
        console.log("dada");
        var scope = this;

        d3.xml('./explosion.svg',function(xml){
            scope.explosion = xml.documentElement;
            scope.initCanvas();
            scope.initDimensions();
            //scope.initBackground();
            scope.showData();
        });

        scope.initCanvas = function () {
            scope.canvas = d3.select('.container')
                    .append('svg')
                    .classed('main',true)
                    .attr('width', '100%')
                    .attr('height', '100%');

            scope.background = scope.canvas
                    .append('g')
                    .classed('background', true);

            scope.game = scope.canvas
                    .append('g')
                    .classed('game', true);
        };

        scope.initDimensions = function () {
            var clientRect = scope.canvas
                    .node().getBoundingClientRect();

            scope.width = clientRect.width;
            scope.height = clientRect.height;
        };

        scope.showData = function(){
            setInterval(function(){

                var x = Math.floor(Math.random() * scope.width);
                var y = Math.floor(Math.random() * scope.height);
                //var r = Math.floor(Math.random() * 5);
                var r = 1;
                scope.game.append('circle')
                        .classed('bg-circle',true)
                        .attr('r',r)
                        .attr('cx',x)
                        .attr('cy',0)
                        .attr('opacity',0.2)
                        .transition()
                        .duration(20000)
                        .ease('linear')
                        .attr('opacity',1)
                        .attr('cy',scope.height).remove();


            },500);
        }

    };

    new Shooter();

    (function($) {
        $.fn.typewriter = function(domwriter,index,finishCallBack) {
            this.each(function() {
                var $ele = $(this), str = $ele.html(), progress = 0;
                domwriter.html('');
                var timer = setInterval(function() {
                    var current = str.substr(progress, 1);
                    if (current == '<') {
                        progress = str.indexOf('>', progress) + 1;
                    } else {
                        progress++;
                    }
                    domwriter.html(str.substring(0, progress) + (progress & 1 ? '_<i class=\"fa fa-heart\"></i>' : ''));
                    if (progress >= str.length) {
                        clearInterval(timer);
                        if(typeof finishCallBack == 'function'){
                            finishCallBack(index);
                        }
                    }
                }, 75);
            });
            return this;
        };
    })(jQuery);


</script>
<script type="text/javascript">

    $("#page1").typewriter($("#code"),1,writeDomCallBack);

    function writeDomCallBack(pindex) {
        var dom = $("#page"+(++pindex));
        if(dom.length>0){
            dom.typewriter($("#code"),pindex,writeDomCallBack);
        }else{
            fireStart();
        }
    }
    //fireStart();
    /*$("#code").typewriter(function(){
        console.log("OK");
    });*/

</script>
</html>
